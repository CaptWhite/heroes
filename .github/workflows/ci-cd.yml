name: Despliegue en VPS con Docker Compose

on:
  push:
    # Ejecuta el workflow cada vez que se haga un push a la rama 'main'
    branches:
      - main
  workflow_dispatch: # Permite ejecuci√≥n manual desde GitHub UI

jobs:
  deploy:
    runs-on: ubuntu-latest # Ejecuta en un runner hospedado por GitHub

    steps:
      - name: ‚¨áÔ∏è Checkout del c√≥digo
        uses: actions/checkout@v4
        
      # --- Configuraci√≥n SSH para Conexi√≥n al VPS ---
      - name: üîë Configurar SSH
        uses: webfactory/ssh-agent@v0.9.0
        with:
          # Clave privada SSH de tu usuario en el VPS.
          # Debe estar almacenada en Secrets de GitHub (ej: SSH_PRIVATE_KEY)
          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

 
      - name: ‚úÖ Verificar Estado del Despliegue (Opcional)
        run: echo "El workflow se ha completado. Verifica tu VPS en http://${{ secrets.VPS_HOST }}:8088"